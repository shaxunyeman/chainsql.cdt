include(ExternalProject)
find_package(Git REQUIRED)
include(GNUInstallDirs)

ExternalProject_Add(
  ChainSQLClang
  CMAKE_ARGS 
    -DCMAKE_INSTALL_PREFIX=${CMAKE_INSTALL_PREFIX}/llvm 
    -DCMAKE_CXX_COMPILER=${CMAKE_CXX_COMPILER} 
    -DCMAKE_C_COMPILER=${CMAKE_C_COMPILER} 
    -DCMAKE_BUILD_TYPE=${TOOLS_BUILD_TYPE} 
    -DCHAINSQL_TOOL_DIR=${CMAKE_SOURCE_DIR}/tools 
    -DCMAKE_CXX_FLAGS=${CMAKE_CXX_FLAGS} 
    -DLLVM_CCACHE_BUILD=Off

  SOURCE_DIR "${CMAKE_SOURCE_DIR}/chainsql_llvm"
  BINARY_DIR "${CMAKE_BINARY_DIR}/chainsql_llvm"
  UPDATE_COMMAND ""
  PATCH_COMMAND  ""
  TEST_COMMAND   ""
  INSTALL_COMMAND ""
  BUILD_ALWAYS 1
)
